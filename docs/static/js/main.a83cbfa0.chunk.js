(this.webpackJsonpyoutubify=this.webpackJsonpyoutubify||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(52),u=n.n(c),l=n(13),i=n.n(l),o=n(22),s=n(5),m=(n(60),n(31)),f=n(53),d=n.n(f);function p(e,t){var n=Array.isArray(t)?t:[t],a=[];return function e(t){if(Array.isArray(t))t.forEach((function(t){return e(t)}));else if("object"===typeof t){var r=Object.keys(t);n.every((function(e){return r.includes(e)}))?a.push(t):r.forEach((function(n){return e(t[n])}))}}(e),a.filter((function(e,t,n){return n.indexOf(e)===t}))}function h(){return"undefined"!==typeof window.orientation}var b=window.fetch;function y(e){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return!!e.mimeType&&e.mimeType.includes("audio/mp4")},e.next=3,d.a.getInfo(t,{filter:n});case 3:return a=e.sent,r=a.player_response.streamingData.adaptiveFormats.filter((function(e){return e.mimeType.includes("audio/mp4")})),e.abrupt("return",r[0].url);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return e=h()?e.split('<div id="initial-data">\x3c!-- {')[1].split("} --\x3e</div>")[0]:e.split('window["ytInitialData"] = {')[1].split("};")[0],JSON.parse("{"+e+"}")}))}window.fetch=function(e,t){return"string"===typeof e&&(e.includes("youtube.com")||e.includes("googlevideo.com"))&&(e="https://cors-anywhere.herokuapp.com/"+e,t=Object(m.a)({},t||{},{headers:Object(m.a)({},t&&t.headers||{},{Origin:"*"})})),b(e,t)};var O=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),m=l[0],f=l[1],d=Object(a.useState)(localStorage.getItem("userId")||""),b=Object(s.a)(d,2),E=b[0],O=b[1],g=Object(a.useState)(!1),j=Object(s.a)(g,2),w=j[0],k=j[1],I=Object(a.useState)(),x=Object(s.a)(I,2),C=x[0],S=x[1],A=Object(a.useState)(""),N=Object(s.a)(A,2),T=N[0],F=N[1],G=Object(a.useState)(!1),J=Object(s.a)(G,2),B=J[0],D=J[1],P=Object(a.useState)(),W=Object(s.a)(P,2),V=W[0],Y=W[1];Object(a.useEffect)((function(){E&&_()}),[]);var $=Object(a.useCallback)((function(e){var t=e.target.value;switch(e.target.name){case"url":return c(t);case"userId":return O(t);case"playlistId":return F(t);default:return}}),[c]),_=Object(a.useCallback)((function(){var e;k(!0),e=E,localStorage.setItem("userId",e),function(e){return v("https://youtube.com/user/".concat(e,"/playlists")).catch((function(){return v("https://youtube.com/channel/".concat(e,"/playlists"))})).then((function(e){return p(e,["playlistId","title"]).map((function(e){return{id:e.playlistId,title:p(e.title,["text"])[0].text,thumbnail:p(e,["height","url"])[0].url}}))}))}(E||"").then((function(e){k(!1),S(e)}))}),[E,S,k]),q=Object(a.useCallback)((function(){D(!0),function(e){return v("https://youtube.com/playlist?list=".concat(e)).then((function(e){return p(e,["videoId","title"]).map((function(e){var t=h()?"text":"simpleText";return{id:e.videoId,title:p(e.title,t)[0][t],thumbnail:p(e,["height","url"])[0].url}}))}))}(T||"").then((function(e){Y(e),D(!1)}))}),[T,Y,D]),z=Object(a.useCallback)(Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,y(n||"");case 3:t=e.sent,setTimeout((function(){return f(!1)}),2e3),c(t);case 6:case"end":return e.stop()}}),e)}))),[c,n]);return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Youtubify"),r.a.createElement("hr",null),r.a.createElement("input",{placeholder:"youtube user id",name:"userId",value:E,onChange:$}),r.a.createElement("button",{onClick:_},"Go"),w&&r.a.createElement("div",{className:"loading"}),C&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Playlists"),r.a.createElement("ul",null,C.map((function(e,t){return r.a.createElement("li",{key:t,onClick:function(){return F(e.id)}},r.a.createElement("img",{alt:e.title,src:e.thumbnail}),r.a.createElement("span",null,e.title))})))),r.a.createElement("hr",null),r.a.createElement("input",{placeholder:"youtube playlist id",name:"playlistId",value:T,onChange:$}),r.a.createElement("button",{onClick:q},"Go"),B&&r.a.createElement("div",{className:"loading"}),V&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Videos"),r.a.createElement("ul",null,V.map((function(e,t){return r.a.createElement("li",{key:t,onClick:function(){return c(e.id)}},r.a.createElement("img",{alt:e.title,src:e.thumbnail}),r.a.createElement("span",null,e.title))})))),r.a.createElement("hr",null),r.a.createElement("input",{placeholder:"youtube video id",name:"url",value:n,onChange:$}),r.a.createElement("button",{onClick:z},"Go"),m&&r.a.createElement("div",{className:"loading"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("audio",{autoPlay:!0,controls:!0,src:n}),r.a.createElement("hr",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){e.exports=n(107)},60:function(e,t,n){},64:function(e,t){},66:function(e,t){},80:function(e,t){},82:function(e,t){}},[[54,1,2]]]);
//# sourceMappingURL=main.a83cbfa0.chunk.js.map