(this.webpackJsonpyoutubify=this.webpackJsonpyoutubify||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(52),c=n.n(u),l=n(13),i=n.n(l),o=n(22),s=n(5),m=(n(60),n(31)),f=n(53),p=n.n(f);function d(e,t){var n=Array.isArray(t)?t:[t],a=[];return function e(t){if(Array.isArray(t))t.forEach((function(t){return e(t)}));else if("object"===typeof t){var r=Object.keys(t);n.every((function(e){return r.includes(e)}))?a.push(t):r.forEach((function(n){return e(t[n])}))}}(e),a.filter((function(e,t,n){return n.indexOf(e)===t}))}function h(){return"undefined"!==typeof window.orientation}var b=window.fetch;function y(e){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(i.a.mark((function e(t){var n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return!!e.mimeType&&e.mimeType.includes("audio/mp4")},e.next=3,p.a.getInfo(t,{filter:n});case 3:return a=e.sent,r=a.player_response.streamingData.adaptiveFormats.filter((function(e){return e.mimeType.includes("audio/mp4")})),e.abrupt("return",r[0].url);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return e=h()?e.split('<div id="initial-data">\x3c!-- {')[1].split("} --\x3e</div>")[0]:e.split('window["ytInitialData"] = {')[1].split("};")[0],JSON.parse("{"+e+"}")}))}window.fetch=function(e,t){return"string"===typeof e&&(e.includes("youtube.com")||e.includes("googlevideo.com"))&&(e="https://cors-anywhere.herokuapp.com/"+e,t=Object(m.a)({},t||{},{headers:Object(m.a)({},t&&t.headers||{},{Origin:"*"})})),b(e,t)};var g=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(!1),l=Object(s.a)(c,2),m=l[0],f=l[1],p=Object(a.useState)(localStorage.getItem("userId")||""),b=Object(s.a)(p,2),E=b[0],g=b[1],O=Object(a.useState)(!1),j=Object(s.a)(O,2),w=j[0],k=j[1],I=Object(a.useState)(),x=Object(s.a)(I,2),C=x[0],S=x[1],A=Object(a.useState)(""),N=Object(s.a)(A,2),T=N[0],G=N[1],F=Object(a.useState)(!1),J=Object(s.a)(F,2),_=J[0],B=J[1],D=Object(a.useState)(),P=Object(s.a)(D,2),W=P[0],Y=P[1];Object(a.useEffect)((function(){E&&$()}),[]);var V=Object(a.useCallback)((function(e){var t=e.target.value;switch(e.target.name){case"url":return u(t);case"userId":return g(t);case"playlistId":return G(t);default:return}}),[u]),$=Object(a.useCallback)((function(){var e=E.includes("/user/")?E.split("/user/")[1].split("/")[0]:E.includes("/channel/")?E.split("/channel/")[1].split("/")[0]:E;g(e),k(!0),function(e){return v("https://youtube.com/user/".concat(e,"/playlists")).catch((function(){return v("https://youtube.com/channel/".concat(e,"/playlists"))})).then((function(e){return d(e,["playlistId","title"]).map((function(e){return{id:e.playlistId,title:d(e.title,["text"])[0].text,thumbnail:d(e,["height","url"])[0].url}}))}))}(e||"").then((function(t){!function(e){localStorage.setItem("userId",e)}(e),k(!1),S(t)}))}),[E,S,k]),q=Object(a.useCallback)((function(){B(!0),function(e){return v("https://youtube.com/playlist?list=".concat(e)).then((function(e){return d(e,["videoId","title"]).map((function(e){var t=h()?"text":"simpleText";return{id:e.videoId,title:d(e.title,t)[0][t],thumbnail:d(e,["height","url"])[0].url}}))}))}(T||"").then((function(e){Y(e),B(!1)}))}),[T,Y,B]),z=Object(a.useCallback)(Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,y(n||"");case 3:t=e.sent,setTimeout((function(){return f(!1)}),2e3),u(t);case 6:case"end":return e.stop()}}),e)}))),[u,n]);return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Youtubify"),r.a.createElement("hr",null),r.a.createElement("a",{target:"_blank",href:"http://youtube.com/user"},"Get my account url"),r.a.createElement("input",{placeholder:"youtube account id/url",name:"userId",value:E,onChange:V}),r.a.createElement("button",{onClick:$},"Go"),w&&r.a.createElement("div",{className:"loading"}),C&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Playlists"),r.a.createElement("ul",null,C.map((function(e,t){return r.a.createElement("li",{key:t,onClick:function(){return G(e.id)}},r.a.createElement("img",{alt:e.title,src:e.thumbnail}),r.a.createElement("span",null,e.title))})))),r.a.createElement("hr",null),r.a.createElement("a",{target:"_blank",href:"https://support.google.com/youtube/answer/3127309?hl=en"},"Your playlists must be public"),r.a.createElement("input",{placeholder:"youtube playlist id",name:"playlistId",value:T,onChange:V}),r.a.createElement("button",{onClick:q},"Go"),_&&r.a.createElement("div",{className:"loading"}),W&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Videos"),r.a.createElement("ul",null,W.map((function(e,t){return r.a.createElement("li",{key:t,onClick:function(){return u(e.id)}},r.a.createElement("img",{alt:e.title,src:e.thumbnail}),r.a.createElement("span",null,e.title))})))),r.a.createElement("hr",null),r.a.createElement("input",{placeholder:"youtube video id",name:"url",value:n,onChange:V}),r.a.createElement("button",{onClick:z},"Go"),m&&r.a.createElement("div",{className:"loading"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("audio",{autoPlay:!0,controls:!0,src:n}),r.a.createElement("hr",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},54:function(e,t,n){e.exports=n(107)},60:function(e,t,n){},64:function(e,t){},66:function(e,t){},80:function(e,t){},82:function(e,t){}},[[54,1,2]]]);
//# sourceMappingURL=main.22c939af.chunk.js.map