(this.webpackJsonpyoutubify=this.webpackJsonpyoutubify||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(54),u=n.n(c),i=n(16),o=n(11),l=n.n(o),s=(n(63),Object(a.memo)((function(){return r.a.createElement("div",{className:"account-screen"},r.a.createElement("p",null,"Available soon..."))}))),m=n(1),f=n(56),d=n(57),p={queue:[],playing:void 0};var h=Object(m.a)({},p),b=[function(e,t){var n=Object(d.a)(e.queue),a=e.playing;switch(t.type){case"PLAY":a=t.payload;case"REMOVE":return n=n.filter((function(e){return e.id!==t.payload.id})),Object(m.a)({},e,{playing:a,queue:n});case"ENQUEUE":return n.find((function(e){return e.id===t.payload.id}))||n.push(t.payload),Object(m.a)({},e,{queue:n});case"UPDATE":var r=n.findIndex((function(e){return e.id===t.payload.id}));return n[r]=t.payload,Object(m.a)({},e,{queue:n});case"DEQUEUE":return a=n.shift(),Object(m.a)({},e,{playing:a,queue:n});default:return e}}],y=Object(f.a)(h,b),v=y.Provider,E=y.dispatch,O=y.useSelector,g=(y.withState,n(6)),j=n.n(g),w=n(15),k=n(55),N=n.n(k);function x(e,t){var n=Array.isArray(t)?t:[t],a=[];return function e(t){if(Array.isArray(t))t.forEach((function(t){return e(t)}));else if("object"===typeof t){var r=Object.keys(t);n.every((function(e){return r.includes(e)}))?a.push(t):r.forEach((function(n){return e(t[n])}))}}(e),a.filter((function(e,t,n){return n.indexOf(e)===t}))}function C(){return"undefined"!==typeof window.orientation}var S=window.fetch;function q(e){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(j.a.mark((function e(t){var n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e){return!!e.mimeType&&e.mimeType.includes("audio/mp4")},e.next=3,N.a.getInfo(t,{filter:n});case 3:return a=e.sent,r=a.player_response.streamingData.adaptiveFormats.filter((function(e){return e.mimeType.includes("audio/mp4")})),e.abrupt("return",r[0].url);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return fetch(e).then((function(e){return e.text()})).then((function(e){if(!(e=C()?e.split('<div id="initial-data">\x3c!-- {')[1].split("} --\x3e</div>")[0]:e.split('window["ytInitialData"] = {')[1].split("};")[0]))throw new Error("no content");return JSON.parse("{"+e+"}")}))}function T(e){var t=e.split(" ").join("+");return P("https://youtube.com/results?search_query=".concat(t,"&sp=EgIQAQ%3D%3D")).then((function(e){return x(e,["videoId","title"]).map((function(e){console.log(e);var t=e.title.simpleText||x(e.title,"text")[0].text,n=x(e,["height","url"])[0],a=n&&n.url;return{id:e.videoId,title:t,thumbnail:a}}))}))}function U(e){return D.apply(this,arguments)}function D(){return(D=Object(w.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("item",t),t.audioSrc){e.next=6;break}return e.next=4,q(t.id);case 4:return n=e.sent,e.abrupt("return",Object(m.a)({},t,{audioSrc:n}));case 6:return e.abrupt("return",Object(m.a)({},t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){var t;!function(e){var t=document.querySelector("link[rel*='icon']")||document.createElement("link");t.type="image/x-icon",t.rel="shortcut icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}(e.thumbnail),t=e.title,document.title=t,E({type:"PLAY",payload:Object(m.a)({},e,{loading:!0})}),U(e).then((function(e){E({type:"PLAY",payload:Object(m.a)({},e,{loading:!1})})}))}function Q(e){E({type:"ENQUEUE",payload:e}),U(e).then((function(e){E({type:"UPDATE",payload:e})}))}window.fetch=function(e,t){return"string"===typeof e&&(e.includes("youtube.com")||e.includes("googlevideo.com"))&&(e="https://cors-anywhere.herokuapp.com/"+e,t=Object(m.a)({},t||{},{headers:Object(m.a)({},t&&t.headers||{},{Origin:"*"})})),S(e,t)};n(111);var B,J=Object(a.memo)((function(e){var t=e.title,n=e.thumbnail,c=e.onClick,u=O((function(e){return e.queue})),i=Object(a.useCallback)((function(){c&&c(e)}),[e,c]),o=l()({"track-item":!0,enqueued:u.find((function(t){return t.id===e.id}))});return r.a.createElement("div",{className:o,onClick:i},r.a.createElement("img",{alt:t,src:n}),r.a.createElement("h4",null,t))})),L=(n(112),n(113),Object(a.memo)((function(){return r.a.createElement("div",{className:"loading"})}))),Y=Object(a.memo)((function(){var e=O((function(e){return e.playing})),t=O((function(e){return e.queue}));return r.a.createElement("div",{className:"playing-screen"},r.a.createElement("ul",null,r.a.createElement("h2",null,"Playing now:"),e?r.a.createElement(r.a.Fragment,null,e.loading&&r.a.createElement(L,null),r.a.createElement(J,e)):r.a.createElement("p",null,"Nothing is playing. ",r.a.createElement("br",null),"Choose a video from queue below."),r.a.createElement("br",null),r.a.createElement("h2",null,"Queue:"),0===t.length&&r.a.createElement("p",null,"No videos in queue. ",r.a.createElement("br",null),"Search some videos and add them."),t.map((function(e,t){return r.a.createElement(J,Object.assign({key:t},e,{onClick:I}))}))),r.a.createElement("audio",{autoPlay:!0,controls:!0,src:e&&e.audioSrc}))})),F=n(25),W=(n(114),Object(a.memo)((function(e){var t=e.placeholder,n=e.className,c=e.onChange,u=e.name,i=e.value,o=Object(a.useCallback)((function(e){c(e.target.value,u)}),[c,u]),s=l()(Object(F.a)({input:!0},n||"",!!n));return r.a.createElement("input",{placeholder:t,className:s,name:u,value:i,onChange:o})}))),_=(n(115),Object(a.memo)((function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),o=Object(i.a)(u,2),l=o[0],s=o[1],m=Object(a.useState)([]),f=Object(i.a)(m,2),d=f[0],p=f[1],h=Object(a.useCallback)(Object(w.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,T(l||"");case 3:t=e.sent,p(t),c(!1);case 6:case"end":return e.stop()}}),e)}))),[l]),b=Object(a.useCallback)((function(e){B&&clearTimeout(B),s(e),B=setTimeout(h,500)}),[s,h]);return r.a.createElement("div",{className:"search-screen"},r.a.createElement(W,{placeholder:"Search",value:l,onChange:b}),r.a.createElement("ul",null,n&&r.a.createElement(L,null),d.map((function(e,t){return r.a.createElement(J,Object.assign({key:t},e,{onClick:Q}))}))))}))),M=(n(116),Object(a.memo)((function(){var e=Object(a.useState)(1),t=Object(i.a)(e,2),n=t[0],c=t[1],u=[{comp:r.a.createElement(s,null),title:"Account"},{comp:r.a.createElement(Y,null),title:"Playing"},{comp:r.a.createElement(_,null),title:"Search"}];return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"tabs"},u.map((function(e,t){var a=l()({tab:!0,active:t===n});return r.a.createElement("div",{className:a},e.comp)}))),r.a.createElement("div",{className:"menubar"},u.map((function(e,t){var a=l()({active:t===n});return r.a.createElement("li",{className:a,onClick:function(){return c(t)}},e.title)}))))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(v,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t,n){e.exports=n(117)},63:function(e,t,n){},68:function(e,t){},70:function(e,t){},84:function(e,t){},86:function(e,t){}},[[58,1,2]]]);
//# sourceMappingURL=main.ff6dd0a0.chunk.js.map